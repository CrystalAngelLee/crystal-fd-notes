# Array æ„é€ å™¨

Array æ„é€ å™¨ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨å¯¹è±¡å­—é¢é‡çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚ var a = [] å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å†™æ³•ã€‚ä½†æ˜¯ï¼Œæ€»æœ‰å¯¹è±¡å­—é¢é‡è¡¨è¿°ä¹åŠ›çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼Œæˆ‘æƒ³åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 6 çš„ç©ºæ•°ç»„ï¼Œç”¨å¯¹è±¡å­—é¢é‡çš„æ–¹å¼æ˜¯æ— æ³•åˆ›å»ºçš„ï¼Œå› æ­¤åªèƒ½å†™æˆä¸‹è¿°ä»£ç è¿™æ ·ã€‚

```js
// ä½¿ç”¨ Array æ„é€ å™¨ï¼Œå¯ä»¥è‡ªå®šä¹‰é•¿åº¦
var a = Array(6); // [empty Ã— 6]
// ä½¿ç”¨å¯¹è±¡å­—é¢é‡
var b = [];
b.length = 6; // [undefined Ã— 6]
```

Array æ„é€ å™¨æ ¹æ®å‚æ•°é•¿åº¦çš„ä¸åŒï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š

- new Array(arg1, arg2,â€¦)ï¼Œå‚æ•°é•¿åº¦ä¸º 0 æˆ–é•¿åº¦å¤§äºç­‰äº 2 æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å°†æŒ‰ç…§é¡ºåºä¾æ¬¡æˆä¸ºæ–°æ•°ç»„çš„ç¬¬ 0 è‡³ç¬¬ N é¡¹ï¼ˆå‚æ•°é•¿åº¦ä¸º 0 æ—¶ï¼Œè¿”å›ç©ºæ•°ç»„ï¼‰ï¼›

- new Array(len)ï¼Œå½“ len ä¸æ˜¯æ•°å€¼æ—¶ï¼Œå¤„ç†åŒä¸Šï¼Œè¿”å›ä¸€ä¸ªåªåŒ…å« len å…ƒç´ ä¸€é¡¹çš„æ•°ç»„ï¼›å½“ len ä¸ºæ•°å€¼æ—¶ï¼Œlen æœ€å¤§ä¸èƒ½è¶…è¿‡ 32 ä½æ— ç¬¦å·æ•´å‹ï¼Œå³éœ€è¦å°äº 2 çš„ 32 æ¬¡æ–¹ï¼ˆlen æœ€å¤§ä¸º Math.pow(2,32)ï¼‰ï¼Œå¦åˆ™å°†æŠ›å‡º RangeErrorã€‚



## ES6 æ–°å¢çš„æ„é€ æ–¹æ³•

### Array.of

Array.of ç”¨äºå°†å‚æ•°ä¾æ¬¡è½¬åŒ–ä¸ºæ•°ç»„ä¸­çš„ä¸€é¡¹ï¼Œç„¶åè¿”å›è¿™ä¸ªæ–°æ•°ç»„ï¼Œè€Œä¸ç®¡è¿™ä¸ªå‚æ•°æ˜¯æ•°å­—è¿˜æ˜¯å…¶ä»–ã€‚å®ƒåŸºæœ¬ä¸Šä¸ Array æ„é€ å™¨åŠŸèƒ½ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±åœ¨å•ä¸ªæ•°å­—å‚æ•°çš„å¤„ç†ä¸Šã€‚

```js
Array.of(8.0); // [8]
Array(8.0); // [empty Ã— 8]
Array.of(8.0, 5); // [8, 5]
Array(8.0, 5); // [8, 5]
Array.of('8'); // ["8"]
Array('8'); // ["8"]
```

å½“å‚æ•°ä¸ºä¸¤ä¸ªæ—¶ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼›å½“å‚æ•°æ˜¯ä¸€ä¸ªæ—¶ï¼ŒArray.of ä¼šæŠŠå‚æ•°å˜æˆæ•°ç»„é‡Œçš„ä¸€é¡¹ï¼Œè€Œæ„é€ å™¨åˆ™ä¼šç”Ÿæˆé•¿åº¦å’Œç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒçš„ç©ºæ•°ç»„ã€‚



### Array.from

Array.fromæ–¹æ³•ç”¨äºå°†ä¸¤`ç±»`å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰ã€‚

æ³¨æ„ï¼šæ˜¯è¿”å›æ–°çš„æ•°ç»„ï¼Œä¸æ”¹å˜åŸå¯¹è±¡

ä»è¯­æ³•ä¸Šçœ‹ï¼ŒArray.from æ‹¥æœ‰ 3 ä¸ªå‚æ•°ï¼š

1. ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå¿…é€‰ï¼›

2. åŠ å·¥å‡½æ•°ï¼Œæ–°ç”Ÿæˆçš„æ•°ç»„ä¼šç»è¿‡è¯¥å‡½æ•°çš„åŠ å·¥å†è¿”å›ï¼›

3. this ä½œç”¨åŸŸï¼Œè¡¨ç¤ºåŠ å·¥å‡½æ•°æ‰§è¡Œæ—¶ this çš„å€¼ã€‚

```js
var obj = {0: 'a', 1: 'b', 2:'c', length: 3};
Array.from(obj, function(value, index){
  console.log(value, index, this, arguments.length);
  return value.repeat(3);   //å¿…é¡»æŒ‡å®šè¿”å›å€¼ï¼Œå¦åˆ™è¿”å› undefined
}, obj);
// a 0 {0: "a", 1: "b", 2: "c", length: 3} 2
// b 1 {0: "a", 1: "b", 2: "c", length: 3} 2
// c 2 {0: "a", 1: "b", 2: "c", length: 3} 2
//  ["aaa", "bbb", "ccc"]

// String
Array.from('abc');         // ["a", "b", "c"]
// Set
Array.from(new Set(['abc', 'def'])); // ["abc", "def"]
// Map
Array.from(new Map([[1, 'ab'], [2, 'de']])); 
// [[1, 'ab'], [2, 'de']]
```



# Array çš„åˆ¤æ–­

åœ¨ ES6 æä¾›è¯¥æ–¹æ³•ä¹‹å‰ï¼Œè‡³å°‘æœ‰å¦‚ä¸‹ 5 ç§æ–¹å¼å»åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæ•°ç»„ï¼š
```javascript
var a = [];
// 1.åŸºäºinstanceof
a instanceof Array;
// 2.åŸºäºconstructor
a.constructor === Array;
// 3.åŸºäºObject.prototype.isPrototypeOf
Array.prototype.isPrototypeOf(a);
// 4.åŸºäºgetPrototypeOf
Object.getPrototypeOf(a) === Array.prototype;
// 5.åŸºäºObject.prototype.toString
Object.prototype.toString.apply(a) === '[object Array]';
```

ES6 ä¹‹åæ–°å¢äº†ä¸€ä¸ª **Array.isArray** æ–¹æ³•ï¼Œèƒ½ç›´æ¥åˆ¤æ–­æ•°æ®ç±»å‹æ˜¯å¦ä¸ºæ•°ç»„ï¼Œä½†æ˜¯å¦‚æœ isArray ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ Array.isArray çš„ polyfill é€šå¸¸å¯ä»¥è¿™æ ·å†™ï¼š

```javascript
if (!Array.isArray){
  Array.isArray = function(arg){
    return Object.prototype.toString.call(arg) === '[object Array]';
  };
}
```



# Array çš„åŸºæœ¬æ–¹æ³•

## æ”¹å˜è‡ªèº«çš„æ–¹æ³•

>  popã€pushã€reverseã€shiftã€sortã€spliceã€unshiftï¼Œä»¥åŠä¸¤ä¸ª ES6 æ–°å¢çš„æ–¹æ³• copyWithin å’Œ fill

```javascript
// popæ–¹æ³•
var array = ["cat", "dog", "cow", "chicken", "mouse"];
var item = array.pop();
console.log(array); // ["cat", "dog", "cow", "chicken"]
console.log(item); // mouse
// pushæ–¹æ³•
var array = ["football", "basketball",  "badminton"];
var i = array.push("golfball");
console.log(array); 
// ["football", "basketball", "badminton", "golfball"]
console.log(i); // 4
// reverseæ–¹æ³•
var array = [1,2,3,4,5];
var array2 = array.reverse();
console.log(array); // [5,4,3,2,1]
console.log(array2===array); // true
// shiftæ–¹æ³•
var array = [1,2,3,4,5];
var item = array.shift();
console.log(array); // [2,3,4,5]
console.log(item); // 1
// unshiftæ–¹æ³•
var array = ["red", "green", "blue"];
var length = array.unshift("yellow");
console.log(array); // ["yellow", "red", "green", "blue"]
console.log(length); // 4
// sortæ–¹æ³•
var array = ["apple","Boy","Cat","dog"];
var array2 = array.sort();
console.log(array); // ["Boy", "Cat", "apple", "dog"]
console.log(array2 == array); // true
// spliceæ–¹æ³•
var array = ["apple","boy"];
var splices = array.splice(1,1);
console.log(array); // ["apple"]
console.log(splices); // ["boy"]
// copyWithinæ–¹æ³•
var array = [1,2,3,4,5]; 
var array2 = array.copyWithin(0,3);
console.log(array===array2,array2);  // true [4, 5, 3, 4, 5]
// fillæ–¹æ³•
var array = [1,2,3,4,5];
var array2 = array.fill(10,0,3);
console.log(array===array2,array2); 
// true [10, 10, 10, 4, 5], å¯è§æ•°ç»„åŒºé—´[0,3]çš„å…ƒç´ å…¨éƒ¨æ›¿æ¢ä¸º10
```


## ä¸æ”¹å˜è‡ªèº«çš„æ–¹æ³•

> concatã€joinã€sliceã€toStringã€toLocateStringã€indexOfã€lastIndexOfã€æœªå½¢æˆæ ‡å‡†çš„ toSourceï¼Œä»¥åŠ ES7 æ–°å¢çš„æ–¹æ³• includes

```javascript
// concatæ–¹æ³•
var array = [1, 2, 3];
var array2 = array.concat(4,[5,6],[7,8,9]);
console.log(array2); // [1, 2, 3, 4, 5, 6, 7, 8, 9]
console.log(array); // [1, 2, 3], å¯è§åŸæ•°ç»„å¹¶æœªè¢«ä¿®æ”¹
// joinæ–¹æ³•
var array = ['We', 'are', 'Chinese'];
console.log(array.join()); // "We,are,Chinese"
console.log(array.join('+')); // "We+are+Chinese"
// sliceæ–¹æ³•
var array = ["one", "two", "three","four", "five"];
console.log(array.slice()); // ["one", "two", "three","four", "five"]
console.log(array.slice(2,3)); // ["three"]
// toStringæ–¹æ³•
var array = ['Jan', 'Feb', 'Mar', 'Apr'];
var str = array.toString();
console.log(str); // Jan,Feb,Mar,Apr
// tolocalStringæ–¹æ³•
var array= [{name:'zz'}, 123, "abc", new Date()];
var str = array.toLocaleString();
console.log(str); // [object Object],123,abc,2016/1/5 ä¸‹åˆ1:06:23
// indexOfæ–¹æ³•
var array = ['abc', 'def', 'ghi','123'];
console.log(array.indexOf('def')); // 1
// includesæ–¹æ³•
var array = [-0, 1, 2];
console.log(array.includes(+0)); // true
console.log(array.includes(1)); // true
var array = [NaN];
console.log(array.includes(NaN)); // true
```



## æ•°ç»„éå†çš„æ–¹æ³•

> åŸºäº ES6ï¼Œä¸ä¼šæ”¹å˜è‡ªèº«çš„éå†æ–¹æ³•ä¸€å…±æœ‰ 12 ä¸ªï¼Œåˆ†åˆ«ä¸º forEachã€everyã€someã€filterã€mapã€reduceã€reduceRightï¼Œä»¥åŠ ES6 æ–°å¢çš„æ–¹æ³• entriesã€findã€findIndexã€keysã€values

```javascript
// forEachæ–¹æ³•
var array = [1, 3, 5];
var obj = {name:'cc'};
var sReturn = array.forEach(function(value, index, array){
  array[index] = value;
  console.log(this.name); // ccè¢«æ‰“å°äº†ä¸‰æ¬¡, thisæŒ‡å‘obj
},obj);
console.log(array); // [1, 3, 5]
console.log(sReturn); // undefined, å¯è§è¿”å›å€¼ä¸ºundefined
// everyæ–¹æ³•
var o = {0:10, 1:8, 2:25, length:3};
var bool = Array.prototype.every.call(o,function(value, index, obj){
  return value >= 8;
},o);
console.log(bool); // true
// someæ–¹æ³•
var array = [18, 9, 10, 35, 80];
var isExist = array.some(function(value, index, array){
  return value > 20;
});
console.log(isExist); // true 
// map æ–¹æ³•
var array = [18, 9, 10, 35, 80];
array.map(item => item + 1);
console.log(array);  // [19, 10, 11, 36, 81]
// filter æ–¹æ³•
var array = [18, 9, 10, 35, 80];
var array2 = array.filter(function(value, index, array){
  return value > 20;
});
console.log(array2); // [35, 80]
// reduceæ–¹æ³•
var array = [1, 2, 3, 4];
var s = array.reduce(function(previousValue, value, index, array){
  return previousValue * value;
},1);
console.log(s); // 24
// ES6å†™æ³•æ›´åŠ ç®€æ´
array.reduce((p, v) => p * v); // 24
// reduceRightæ–¹æ³• (å’Œreduceçš„åŒºåˆ«å°±æ˜¯ä»åå¾€å‰ç´¯è®¡)
var array = [1, 2, 3, 4];
array.reduceRight((p, v) => p * v); // 24
// entriesæ–¹æ³•
var array = ["a", "b", "c"];
var iterator = array.entries();
console.log(iterator.next().value); // [0, "a"]
console.log(iterator.next().value); // [1, "b"]
console.log(iterator.next().value); // [2, "c"]
console.log(iterator.next().value); // undefined, è¿­ä»£å™¨å¤„äºæ•°ç»„æœ«å°¾æ—¶, å†è¿­ä»£å°±ä¼šè¿”å›undefined
// find & findIndexæ–¹æ³•
var array = [1, 3, 5, 7, 8, 9, 10];
function f(value, index, array){
  return value%2==0;     // è¿”å›å¶æ•°
}
function f2(value, index, array){
  return value > 20;     // è¿”å›å¤§äº20çš„æ•°
}
console.log(array.find(f)); // 8
console.log(array.find(f2)); // undefined
console.log(array.findIndex(f)); // 4
console.log(array.findIndex(f2)); // -1
// keysæ–¹æ³•
[...Array(10).keys()];     // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[...new Array(10).keys()]; // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
// valuesæ–¹æ³•
var array = ["abc", "xyz"];
var iterator = array.values();
console.log(iterator.next().value);//abc
console.log(iterator.next().value);//xyz
```

å…¶ä¸­ï¼Œè¦æ³¨æ„æœ‰äº›éå†æ–¹æ³•ä¸ä¼šè¿”å›å¤„ç†ä¹‹åçš„æ•°ç»„ï¼Œæ¯”å¦‚ forEachï¼›æœ‰äº›æ–¹æ³•ä¼šè¿”å›å¤„ç†ä¹‹åçš„æ•°ç»„ï¼Œæ¯”å¦‚ filterã€‚

reduce æ–¹æ³•ä¹Ÿéœ€è¦é‡ç‚¹å…³æ³¨ï¼Œå…¶å‚æ•°å¤æ‚ä¸”å¤šï¼Œé€šå¸¸ä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œå…¶å®ä½¿ç”¨ reduce å¾ˆå®¹æ˜“å°±å¯ä»¥è§£å†³ã€‚æˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ï¼Œreduce åˆ°åº•èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå…ˆçœ‹ä¸‹ reduce çš„ä¸¤ä¸ªå‚æ•°ï¼š

é¦–å…ˆæ˜¯ callbackï¼ˆä¸€ä¸ªåœ¨æ•°ç»„çš„æ¯ä¸€é¡¹ä¸­è°ƒç”¨çš„å‡½æ•°ï¼Œæ¥å—å››ä¸ªå‚æ•°ï¼‰ï¼š

- previousValueï¼ˆä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ï¼‰
- currentValueï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼‰
- currentIndexï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ä¸‹æ ‡ï¼‰
- arrayï¼ˆè°ƒç”¨ reduce() æ–¹æ³•çš„æ•°ç»„ï¼‰

ç„¶åæ˜¯ initialValueï¼ˆå¯é€‰çš„åˆå§‹å€¼ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ä¼ ç»™ previousValue çš„å€¼ï¼‰

```javascript
/* é¢˜ç›®ï¼šæ•°ç»„ arr = [1,2,3,4] æ±‚æ•°ç»„çš„å’Œï¼š*/
// ç¬¬ä¸€ç§æ–¹æ³•ï¼š
var arr = [1,2,3,4];
var sum = 0;
arr.forEach(function(e){sum += e;}); // sum = 10
// ç¬¬äºŒç§æ–¹æ³•
var arr = [1,2,3,4];
var sum = 0;
arr.map(function(obj){sum += obj});
// ç¬¬ä¸‰ç§æ–¹æ³•
var arr = [1,2,3,4];
arr.reduce(function(pre,cur){return pre + cur});
```

ğŸ» å°è¯•ç‰›åˆ€ï¼š

**é¢˜ç›®ï¼š var arr = [ {name: 'brick1'}, {name: 'brick2'}, {name: 'brick3'} ]**

å¸Œæœ›æœ€åè¿”å›åˆ° arr é‡Œé¢æ¯ä¸ªå¯¹è±¡çš„ name æ‹¼æ¥æ•°æ®ä¸º 'brick1, brick2 & brick3' ï¼Œå¦‚æœç”¨ reduce å¦‚ä½•å®ç°å‘¢ï¼Ÿ

```javascript
var arr =  [ {name: 'one'}, {name: 'two'}, {name: 'three'} ];
arr.reduce(function(prev, current, index, array){
  if (index === 0){
    return current.name;
  } else if (index === array.length - 1){
    return prev + ' & ' + current.name;
  } else {
    return prev + ', ' + current.name;
  }
}, '');
// è¿”å›ç»“æœ "one, two & three"
```

**ğŸ“šæ€»ç»“**

- æ‰€æœ‰æ’å…¥å…ƒç´ çš„æ–¹æ³•ï¼Œæ¯”å¦‚ pushã€unshift ä¸€å¾‹è¿”å›æ•°ç»„æ–°çš„é•¿åº¦ï¼›

- æ‰€æœ‰åˆ é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œæ¯”å¦‚ popã€shiftã€splice ä¸€å¾‹è¿”å›åˆ é™¤çš„å…ƒç´ ï¼Œæˆ–è€…è¿”å›åˆ é™¤çš„å¤šä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„ï¼›

- éƒ¨åˆ†éå†æ–¹æ³•ï¼Œæ¯”å¦‚ forEachã€everyã€someã€filterã€mapã€findã€findIndexï¼Œå®ƒä»¬éƒ½åŒ…å« function(value,index,array){} å’Œ thisArg è¿™æ ·ä¸¤ä¸ªå½¢å‚ã€‚



# ç±»æ•°ç»„
åœ¨ JavaScript ä¸­ä»¥ä¸‹å‡ ç§æƒ…å†µçš„å¯¹è±¡æ˜¯ç±»æ•°ç»„

1. å‡½æ•°é‡Œé¢çš„å‚æ•°å¯¹è±¡ argumentsï¼›
2. ç”¨ getElementsByTagName/ClassName/Name è·å¾—çš„ HTMLCollectionï¼›
3. ç”¨ querySelector è·å¾—çš„ NodeListã€‚

## ç±»æ•°æ®åŸºæœ¬ä»‹ç»

### arguments

å®ƒçš„å¯¹è±¡åªå®šä¹‰åœ¨å‡½æ•°ä½“ä¸­ï¼ŒåŒ…æ‹¬äº†å‡½æ•°çš„å‚æ•°å’Œå…¶ä»–å±æ€§

```js
function foo(name, age, sex) {
    console.log(arguments);
    console.log(typeof arguments);
    console.log(Object.prototype.toString.call(arguments));
}
foo('jack', '18', 'male');

/* æ‰“å°ç»“æœå¦‚ä¸‹ */
Arguments(3)Â ['jack', '18', 'male', callee: Æ’, Symbol(Symbol.iterator): Æ’]
object
[object Arguments]
```

ä»ç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œtypeof è¿™ä¸ª arguments è¿”å›çš„æ˜¯ objectï¼Œé€šè¿‡ Object.prototype.toString.call è¿”å›çš„ç»“æœæ˜¯ '[object arguments]'ï¼Œå¯ä»¥çœ‹å‡ºæ¥è¿”å›çš„ä¸æ˜¯ '[object array]'ï¼Œè¯´æ˜ arguments å’Œæ•°ç»„è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚

length å±æ€§å¾ˆå¥½ç†è§£ï¼Œå®ƒå°±æ˜¯å‡½æ•°å‚æ•°çš„é•¿åº¦ï¼Œæˆ‘ä»¬ä»æ‰“å°å‡ºçš„ä»£ç ä¹Ÿå¯ä»¥çœ‹å¾—å‡ºæ¥ã€‚å¦å¤–å¯ä»¥çœ‹åˆ° arguments ä¸ä»…ä»…æœ‰ä¸€ä¸ª length å±æ€§ï¼Œè¿˜æœ‰ä¸€ä¸ª callee å±æ€§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ª callee æ˜¯å¹²ä»€ä¹ˆçš„

```js
function foo(name, age, sex) {
    console.log(arguments.callee);
}
foo('jack', '18', 'male');

/* æ‰“å°ç»“æœå¦‚ä¸‹ */
Æ’ foo(name, age, sex) {
    console.log(arguments.callee);
}
```
ä»æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„å°±æ˜¯å‡½æ•°è‡ªèº«ï¼Œå¦‚æœåœ¨å‡½æ•°å†…éƒ¨ç›´æ¥æ‰§è¡Œè°ƒç”¨ callee çš„è¯ï¼Œé‚£å®ƒå°±ä¼šä¸åœåœ°æ‰§è¡Œå½“å‰å‡½æ•°ï¼Œç›´åˆ°æ‰§è¡Œåˆ°å†…å­˜æº¢å‡º


### HTMLCollection

HTMLCollection ç®€å•æ¥è¯´æ˜¯ HTML DOM å¯¹è±¡çš„ä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£åŒ…å«äº†è·å–åˆ°çš„ DOM å…ƒç´ é›†åˆï¼Œè¿”å›çš„ç±»å‹æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå¦‚æœç”¨ typeof æ¥åˆ¤æ–­çš„è¯ï¼Œå®ƒè¿”å›çš„æ˜¯ 'object'ã€‚å®ƒæ˜¯åŠæ—¶æ›´æ–°çš„ï¼Œå½“æ–‡æ¡£ä¸­çš„ DOM å˜åŒ–æ—¶ï¼Œå®ƒä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚

```js
var elem1, elem2;
// document.forms æ˜¯ä¸€ä¸ª HTMLCollection
elem1 = document.forms[0];
elem2 = document.forms.item(0);
console.log(elem1);
console.log(elem2);
console.log(typeof elem1);
console.log(Object.prototype.toString.call(elem1));
```
è¿™é‡Œæ‰“å°å‡ºæ¥äº†é¡µé¢ç¬¬ä¸€ä¸ª form è¡¨å•å…ƒç´ ï¼ŒåŒæ—¶ä¹Ÿæ‰“å°å‡ºæ¥äº†åˆ¤æ–­ç±»å‹çš„ç»“æœï¼Œè¯´æ˜æ‰“å°çš„åˆ¤æ–­çš„ç±»å‹å’Œ arguments è¿”å›çš„ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œtypeof è¿”å›çš„éƒ½æ˜¯ 'object'ï¼Œå’Œä¸Šé¢çš„ç±»ä¼¼ã€‚

å¦å¤–éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ HTML DOM ä¸­çš„ HTMLCollection æ˜¯å³æ—¶æ›´æ–°çš„ï¼Œå½“å…¶æ‰€åŒ…å«çš„æ–‡æ¡£ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ›´æ–°ã€‚


### NodeList

NodeList å¯¹è±¡æ˜¯èŠ‚ç‚¹çš„é›†åˆï¼Œé€šå¸¸æ˜¯ç”± querySlector è¿”å›çš„ã€‚NodeList ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç±»æ•°ç»„ã€‚è™½ç„¶ NodeList ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ for...of æ¥è¿­ä»£ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼ŒNodeList æ˜¯ä¸€ä¸ªå®æ—¶é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ–‡æ¡£ä¸­çš„èŠ‚ç‚¹æ ‘å‘ç”Ÿå˜åŒ–ï¼ŒNodeList ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚

```js
var list = document.querySelectorAll('input[type=checkbox]');
for (var checkbox of list) {
  checkbox.checked = true;
}
console.log(list);
console.log(typeof list);
console.log(Object.prototype.toString.call(list));
```
ä»ä¸Šé¢çš„ä»£ç æ‰§è¡Œçš„ç»“æœä¸­å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æœ‰ CheckBox çš„é¡µé¢æ‰§è¡Œçš„ä»£ç ï¼Œåœ¨ç»“æœå¯ä¸­è¾“å‡ºäº†ä¸€ä¸ª NodeList ç±»æ•°ç»„ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª CheckBox å…ƒç´ ï¼Œå¹¶ä¸”æˆ‘ä»¬åˆ¤æ–­äº†å®ƒçš„ç±»å‹ï¼Œå’Œä¸Šé¢çš„ arguments ä¸ HTMLCollection å…¶å®æ˜¯ç±»ä¼¼çš„ã€‚

## ç±»æ•°ç»„çš„åº”ç”¨åœºæ™¯

### éå†å‚æ•°æ“ä½œ 

æˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥è·å– arguments è¿™ä¸ªç±»æ•°ç»„çš„å€¼ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å¯¹äºå‚æ•°è¿›è¡Œä¸€äº›æ“ä½œã€‚

```js
function add() {
    var sum = 0,
        len = arguments.length;
    for(var i = 0; i < len; i++){
        sum += arguments[i];
    }
    return sum;
}
add()                           // 0
add(1)                          // 1
add(1ï¼Œ2)                       // 3
add(1,2,3,4);                   // 10
```
ç»“åˆä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥å°†å‚æ•°ç›´æ¥è¿›è¡Œç´¯åŠ æ“ä½œï¼Œä»¥è¾¾åˆ°é¢„æœŸçš„æ•ˆæœï¼Œå‚æ•°å¤šå°‘ä¹Ÿå¯ä»¥ä¸å—é™åˆ¶ï¼Œæ ¹æ®é•¿åº¦ç›´æ¥è®¡ç®—ï¼Œè¿”å›å‡ºæœ€åå‡½æ•°çš„å‚æ•°çš„ç´¯åŠ ç»“æœï¼Œå…¶ä»–çš„æ“ä½œä¹Ÿéƒ½å¯ä»¥ä»¿ç…§è¿™æ ·çš„æ–¹å¼æ¥åšã€‚

### å®šä¹‰é“¾æ¥å­—ç¬¦ä¸²å‡½æ•°

```js
function myConcat(separa) {
  var args = Array.prototype.slice.call(arguments, 1);
  return args.join(separa);
}
myConcat(", ", "red", "orange", "blue");
// "red, orange, blue"
myConcat("; ", "elephant", "lion", "snake");
// "elephant; lion; snake"
myConcat(". ", "one", "two", "three", "four", "five");
// "one. two. three. four. five"
```
è¿™æ®µä»£ç è¯´æ˜äº†ï¼Œä½ å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°åˆ°è¯¥å‡½æ•°ï¼Œå¹¶ä½¿ç”¨æ¯ä¸ªå‚æ•°ä½œä¸ºåˆ—è¡¨ä¸­çš„é¡¹åˆ›å»ºåˆ—è¡¨è¿›è¡Œæ‹¼æ¥ã€‚ä»è¿™ä¸ªä¾‹å­ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ—¥å¸¸ç¼–ç ä¸­é‡‡ç”¨è¿™æ ·çš„ä»£ç æŠ½è±¡æ–¹å¼ï¼ŒæŠŠéœ€è¦è§£å†³çš„è¿™ä¸€ç±»é—®é¢˜ï¼Œéƒ½æŠ½è±¡æˆé€šç”¨çš„æ–¹æ³•ï¼Œæ¥æå‡ä»£ç çš„å¯å¤ç”¨æ€§ã€‚

### ä¼ é€’å‚æ•°ä½¿ç”¨

å¯ä»¥å€ŸåŠ© arguments å°†å‚æ•°ä»ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°

```js
// ä½¿ç”¨ apply å°† foo çš„å‚æ•°ä¼ é€’ç»™ bar
function foo() {
    bar.apply(this, arguments);
}
function bar(a, b, c) {
   console.log(a, b, c);
}
foo(1, 2, 3)   //1 2 3
```
ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡åœ¨ foo å‡½æ•°å†…éƒ¨è°ƒç”¨ apply æ–¹æ³•ï¼Œç”¨ foo å‡½æ•°çš„å‚æ•°ä¼ é€’ç»™ bar å‡½æ•°ï¼Œè¿™æ ·å°±å®ç°äº†å€Ÿç”¨å‚æ•°çš„å¦™ç”¨ã€‚

## ç±»æ•°ç»„è½¬æ¢æˆæ•°ç»„

### å€Ÿç”¨æ•°ç»„æ–¹æ³•

> å€Ÿç”¨æ•°ç»„çš„ push æ–¹æ³•

```js
var arrayLike = { 
  0: 'java',
  1: 'script',
  length: 2
} 
// ç”¨ call çš„æ–¹æ³•æ¥å€Ÿç”¨ Array åŸå‹é“¾ä¸Šçš„ push æ–¹æ³•ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç±»æ•°ç»„çš„ push æ–¹æ³•
Array.prototype.push.call(arrayLike, 'jack', 'lily'); 
console.log(typeof arrayLike); // 'object'
console.log(arrayLike);
// {0: "java", 1: "script", 2: "jack", 3: "lily", length: 4}
```
ä»ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒarrayLike å…¶å®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¨¡æ‹Ÿæ•°ç»„çš„ä¸€ä¸ªç±»æ•°ç»„ï¼Œä»æ•°æ®ç±»å‹ä¸Šè¯´å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ–°å¢äº†ä¸€ä¸ª length çš„å±æ€§ã€‚ä»ä»£ç ä¸­è¿˜å¯ä»¥çœ‹å‡ºï¼Œç”¨ typeof æ¥åˆ¤æ–­è¾“å‡ºçš„æ˜¯ 'object'ï¼Œå®ƒè‡ªèº«æ˜¯ä¸ä¼šæœ‰æ•°ç»„çš„ push æ–¹æ³•çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç”¨ call çš„æ–¹æ³•æ¥å€Ÿç”¨ Array åŸå‹é“¾ä¸Šçš„ push æ–¹æ³•ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç±»æ•°ç»„çš„ push æ–¹æ³•ï¼Œç»™ arrayLike æ·»åŠ æ–°çš„å…ƒç´ ã€‚


```js
function sum(a, b) {
  // å°† arguments é€šè¿‡å€Ÿç”¨Array åŸå‹é“¾ä¸Šæ•°ç»„çš„æ–¹æ³•è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œæœ€åéƒ½åˆé€šè¿‡æ•°ç»„çš„ reduce æ–¹æ³•å®ç°äº†å‚æ•°è½¬åŒ–çš„çœŸæ•°ç»„ args çš„ç›¸åŠ ï¼Œæœ€åè¿”å›é¢„æœŸçš„ç»“æœã€‚
  let args = Array.prototype.slice.call(arguments);
  // let args = [].slice.call(arguments); // è¿™æ ·å†™ä¹Ÿæ˜¯ä¸€æ ·æ•ˆæœ
  console.log(args.reduce((sum, cur) => sum + cur));
}
sum(1, 2);  // 3
function sum(a, b) {
  let args = Array.prototype.concat.apply([], arguments);
  console.log(args.reduce((sum, cur) => sum + cur));
}
sum(1, 2);  // 3
```
å€Ÿç”¨ Array åŸå‹é“¾ä¸Šçš„å„ç§æ–¹æ³•ï¼Œæ¥å®ç° sum å‡½æ•°çš„å‚æ•°ç›¸åŠ çš„æ•ˆæœã€‚ä¸€å¼€å§‹éƒ½æ˜¯å°† arguments é€šè¿‡å€Ÿç”¨æ•°ç»„çš„æ–¹æ³•è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œæœ€åéƒ½åˆé€šè¿‡æ•°ç»„çš„ reduce æ–¹æ³•å®ç°äº†å‚æ•°è½¬åŒ–çš„çœŸæ•°ç»„ args çš„ç›¸åŠ ï¼Œæœ€åè¿”å›é¢„æœŸçš„ç»“æœã€‚

### ES6çš„æ–¹æ³•è½¬æ•°ç»„

> Array.from æ–¹æ³•  å±•å¼€è¿ç®—ç¬¦çš„æ–¹æ³•

```js
function sum(a, b) {
  let args = Array.from(arguments);
  console.log(args.reduce((sum, cur) => sum + cur));
}
sum(1, 2);    // 3
function sum(a, b) {
  let args = [...arguments];
  console.log(args.reduce((sum, cur) => sum + cur));
}
sum(1, 2);    // 3
function sum(...args) {
  console.log(args.reduce((sum, cur) => sum + cur));
}
sum(1, 2);    // 3
```



## ç±»æ•°ç»„PKæ•°ç»„

| æ–¹æ³•/ç‰¹å¾  | æ•°ç»„     | ç±»æ•°ç»„ |
| ---------- | -------- | ------ |
| è‡ªå¸¦æ–¹æ³•   | å¤šä¸ªæ–¹æ³• | æ—      |
| lengthå±æ€§ | ğŸˆ¶        | ğŸˆ¶      |
| calleeå±æ€§ | æ—        | ğŸˆ¶      |



# æ•°ç»„æ‰å¹³åŒ–

> æ•°ç»„çš„æ‰å¹³åŒ–å…¶å®å°±æ˜¯å°†ä¸€ä¸ªåµŒå¥—å¤šå±‚çš„æ•°ç»„ arrayï¼ˆåµŒå¥—å¯ä»¥æ˜¯ä»»ä½•å±‚æ•°ï¼‰è½¬æ¢ä¸ºåªæœ‰ä¸€å±‚çš„æ•°ç»„

## ä¸€ï¼š æ™®é€šçš„é€’å½’

é€šè¿‡å¾ªç¯é€’å½’çš„æ–¹å¼ï¼Œä¸€é¡¹ä¸€é¡¹åœ°å»éå†ï¼Œå¦‚æœæ¯ä¸€é¡¹è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå°±ç»§ç»­å¾€ä¸‹éå†ï¼Œåˆ©ç”¨é€’å½’ç¨‹åºçš„æ–¹æ³•ï¼Œæ¥å®ç°æ•°ç»„çš„æ¯ä¸€é¡¹çš„è¿æ¥ã€‚

```js
function flatten(arr) {
  const res = []
  for (let i = 0; i < arr.length; i++) {
    if (Array.isArray(arr[i])) {
      res.push(...flatten(arr[i]))
    } else {
      res.push(arr[i])
    }
  }
  return res
}
```

## äºŒï¼šåˆ©ç”¨ reduce å‡½æ•°è¿­ä»£

```js
function flatten(arr) {
  return arr.reduce((pre, curr) => pre.concat(Array.isArray(curr) ? flatten(curr) : curr),[])
}
```

## ä¸‰ï¼šæ‰©å±•è¿ç®—ç¬¦å®ç°

```js
function flatten(arr) {
  while (arr.some(a => Array.isArray(a))) {
    arr = [].concat(...arr)
  }
  return arr
}
```

## å››ï¼šsplit å’Œ toString å…±åŒå¤„ç†

```js
function flatten(arr) {
  return arr.toString().split(',')
}
// è¾“å‡ºç»“æœï¼š[ '1', '2', '3', '4', '5' ]
```

## äº”ï¼šè°ƒç”¨ ES6 ä¸­çš„ flat

```js
function flatten(arr) {
  return arr.flat(Infinity);
}
```

## å…­ï¼šæ­£åˆ™å’Œ JSON æ–¹æ³•å…±åŒå¤„ç†

```js
function flatten(arr) {
  let str = JSON.stringify(arr);
  str = str.replace(/(\[|\])/g, '')
  return JSON.parse(`[${str}]`)
}
```